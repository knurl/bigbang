registryCredentials:
  enabled: true
  registry: {{HelmRegistry}}
  username: {{HelmRepoUser}}
  password: {{HelmRepoPassword}}

expose:
  type: loadBalancer
  loadBalancer:
    annotations:
      {% if target == "aws" %}
      service.beta.kubernetes.io/aws-load-balancer-internal: "true"
      {% elif target == "gcp" %}
      networking.gke.io/load-balancer-type: "Internal"
      {% endif %}

admin:
  resources:
    requests:
      memory: {{ranger_admin_mem}}
      cpu: {{ranger_admin_cpu}}
    limits:
      memory: {{ranger_admin_mem}}
      cpu: {{ranger_admin_cpu}}

usersync:
  enabled: false

database:
  type: "internal"
  internal:
    resources:
      requests:
        memory: {{ranger_db_mem}}
        cpu: {{ranger_db_cpu}}
      limits:
        memory: {{ranger_db_mem}}
        cpu: {{ranger_db_cpu}}

datasources:
  - name: starburst-enterprise-presto
    host: presto
    port: 8080
    username: presto_service
    password: RangerPassword1

initFile: files/initFile.sh

# The K8S scheduler sometimes makes sub-optimal arrangements in which hive and
# ranger are scheduled to the same nodes, not leaving enough room for either the
# coordinator or a worker. Prevent this with an anti-affinity rule.
affinity:
  podAntiAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      - labelSelector:
          matchExpressions:
            - key: app
              operator: In
              values:
                - starburst-hive
        topologyKey: "kubernetes.io/hostname"
